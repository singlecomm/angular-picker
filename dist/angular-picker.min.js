!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("angular"));else if("function"==typeof define&&define.amd)define(["angular"],t);else{var n=t("object"==typeof exports?require("angular"):e.angular);for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(this,function(e){return function(e){function t(i){if(n[i])return n[i].exports;var l=n[i]={exports:{},id:i,loaded:!1};return e[i].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),a=i(l),s=n(3),r=i(s),o=n(4),c=i(o);n(2),t["default"]=a["default"].module("angularPicker",[]).directive("picker",r["default"]).filter("highlight",c["default"]).name,e.exports=t["default"]},function(t,n){t.exports=e},function(e,t){},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function l(){"ngInject";return{scope:{options:"=?",choices:"=",ngModel:"="},templateUrl:o["default"],controllerAs:"vm",bindToController:!0,controller:["$scope","$timeout",function(e,t){var n=this,i={items:[],shown:[],selected:[],pages:[],currentPage:1,pagesLen:1,itemsLen:0},l=[];n.nextChoicePage=!0,n.options=n.options||{},n.isBackendPaginationApplied=s["default"].isFunction(n.options.choicesCallback),n.ngModel=n.ngModel||[],n.left={},n.right={},n.options=n.options||{},n.options.backendPagination=n.options.backendPagination||{},n.pageSize=n.options.pageSize||10,n.left=s["default"].copy(i),n.right=s["default"].copy(i),n.right.items=n.ngModel,n.right.itemsLen=n.ngModel.length;var a=null;n.choices&&(n.choices=n.choices.concat(n.ngModel)),n.isChoicesNextDisabled=function(){return n.left.currentPage===n.left.pagesLen},n.loadChoices=function(){if(n.isBackendPaginationApplied&&!n.left.filter){var e=s["default"].copy(n.left.currentPage);if(n.left.currentPage--,-1===l.indexOf(e))if(l.push(e),n.left.pages[e]){var t=l.indexOf(e);l.splice(t,1),n.left.currentPage++,n.left.shown=n.left.pages[n.left.currentPage-1]}else{var i=n.options.choicesCallback(e);n.left.loading=!0,i.then(function(t){var i=l.indexOf(e);l.splice(i,1),t.data&&t.data.length>0?(n.left.pages[e]=t.data,n.choices=n.choices.concat(t.data),n.filterChoices(),n.options.totalItems&&n.left.pagesLen===n.left.currentPage&&(n.nextChoicePage=!1)):(n.nextChoicePage=!1,n.left.currentPage--),n.left.loading=!1,n.left.currentPage++})}}else n.left.shown=n.left.pages[n.left.currentPage-1]},n.filterChoices=function(){var e=s["default"].copy(n.right.items);n.ngModel=s["default"].copy(n.right.items),n.right.pages=[],n.left.pages=[];var t=[];if(s["default"].forEach(n.choices,function(n){var i=!1;s["default"].forEach(e,function(e){n.id===e.id&&(i=!0)}),i||t.push(n)}),n.left.items=t.slice(0),n.left.itemsLen=t.length,t&&t.length>0)for(;t.length>0;)n.left.pages.push(t.splice(0,n.pageSize));if(n.options.totalItems?n.left.pagesLen=parseInt(n.options.totalItems/n.pageSize):n.left.pagesLen=n.left.pages.length,n.left.currentPage>n.left.pages.length&&n.left.pages.length>0&&(n.left.currentPage=n.left.pages.length),n.left.shown=n.left.pages[Math.min(n.left.currentPage,n.left.pages.length)-1],e&&e.length>0)for(;e.length>0;)n.right.pages.push(e.splice(0,n.pageSize));n.right.currentPage>n.right.pages.length&&n.right.pages.length>0&&(n.right.currentPage=n.right.pages.length),n.right.pagesLen=n.right.pages.length,n.right.itemsLen=n.ngModel.length,n.right.shown=n.right.pages[Math.min(n.right.currentPage,n.right.pages.length)-1],n.right.filter&&n.filterShownItems("right"),n.left.filter&&n.filterShownItems("left")},n.magicMaker=function(e,t){for(n[e].itemsLen=t.length;t.length>0;)n[e].pages.push(t.splice(0,n.pageSize));n[e].shown=n[e].pages[0],n[e].currentPage=1,n[e].pagesLen=n[e].pages.length,a=null},n.filterShownItems=function(e){var i="left"===e&&s["default"].isFunction(n.options.choicesFilterCallback)?n.options.choicesFilterCallback(n.left.filter):null,l="left"===e&&i&&s["default"].isFunction(i.then),r=l?800:0;a&&t.cancel(a),a=t(function(){var t=n[e].filter;if(t){var a=[];if(l)n.left.loading=!0,i.then(function(t){n[e].pages=[],n[e].shown=[],a=t.data.filter(function(e){var t=!0;return s["default"].forEach(n.ngModel,function(n){e.id===n.id&&(t=!1)}),t}),n.magicMaker(e,a),n.left.loading=!1});else{n[e].pages=[],n[e].shown=[];var r=n[e].items;s["default"].forEach(r,function(e){var i=e.label||n.options.label(e);i.toLowerCase().indexOf(t.toLowerCase())>-1&&a.push(e)}),n.magicMaker(e,a)}}else n.filterChoices()},r)},n.clearFilter=function(e){n[e].filter="",n.filterChoices()},e.$watch(function(){return n.choices},function(){n.filterChoices()},!0),e.$watch(function(){return n.ngModel.length},function(){n.right.items=s["default"].copy(n.ngModel),n.filterChoices()}),n.move=function(e,t){if(t){var i="left"===e?"right":"left";n[i].items=n[i].items.filter(function(e){return e.id!==t.id}),n[e].items=n[e].items||[],n[e].items.push(t),n.filterChoices()}},n.nextPage=function(e){(n[e].currentPage+1<=n[e].pagesLen||n.isBackendPaginationApplied)&&(n[e].currentPage++,"left"===e&&n.isBackendPaginationApplied?n.loadChoices():n[e].shown=n[e].pages[n[e].currentPage-1])},n.previousPage=function(e){n.nextChoicePage=!0,n[e].currentPage>1&&(n[e].currentPage--,n[e].shown=n[e].pages[n[e].currentPage-1])},n.moveAll=function(e){var t="left"===e?"right":"left",i=s["default"].copy(n[t].items);n[e].items=n[e].items||[],s["default"].forEach(i,function(i){n[t].items=n[t].items.filter(function(e){return e.id!==i.id}),n[e].items.push(i)}),n[t].selected=[],n[e].selected=[],n.filterChoices()},n.moveSelected=function(e){var t="left"===e?"right":"left",i=n[t].items.slice(0);n[e].items=n[e].items||[],s["default"].forEach(i,function(i){n.isItemSelected(t,i)&&(n[t].items=n[t].items.filter(function(e){return e.id!==i.id}),n[e].items.push(i))}),n[t].selected=[],n[e].selected=[],n.filterChoices()},n.toggleSelected=function(e,t){n.isItemSelected(e,t)?n[e].selected=n[e].selected.filter(function(e){return e.id!==t.id}):n[e].selected.push(t)},n.isItemSelected=function(e,t){var i=!1;return s["default"].forEach(n[e].selected,function(e){t.id===e.id&&(i=!0)}),i},n.sortableOptions={placeholder:"item",connectWith:".item-container"},n.loadChoices()}]}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=l;var a=n(1),s=i(a),r=n(5),o=i(r);e.exports=t["default"]},function(e,t){"use strict";function n(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n&&t?t.toString().replace(new RegExp(e(n),"gi"),'<span class="filter-highlight">$&</span>'):t}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},function(e,t){var n="/Users/aymanjitan/Applications/angular-picker/src/templates/picker.html",i='<div class="picker row"><div class="col-xs-6 left-control"><label>Available</label><span class="fa fa-times clear-filter" ng-if=vm.left.filter ng-click="vm.clearFilter(\'left\')"></span> <input ng-model=vm.left.filter type=search class=form-control placeholder=Filter ng-change="vm.filterShownItems(\'left\')"><div class=buttons><button ng-click="vm.moveAll(\'right\')" class=all type=button><i class="fa fa-angle-double-right"></i></button> <button ng-click="vm.moveSelected(\'right\')" class=single type=button><i class="fa fa-angle-right"></i></button></div><div class=item-container-wrapper><ul class=item-container><span class=picker-message ng-if="!vm.left.shown.length || vm.left.loading"><span ng-if="vm.left.filter && !vm.left.loading">No items found</span> <span ng-if="!vm.left.filter && !vm.left.loading">No items available</span> <span ng-if=vm.left.loading>Loading ...</span></span><li ng-dblclick="vm.move(\'right\', item)" ng-class="{ active: vm.isItemSelected(\'left\', item) }" class="item lock" ng-click="vm.toggleSelected(\'left\', item)" ng-repeat="item in vm.left.shown" ng-if=!vm.left.loading><span ng-bind-html="(vm.options.label ? vm.options.label(item) : item.label) | highlight:vm.left.filter"></span></li></ul></div><p class=clearfix><span class=pull-left>{{ vm.left.selected.length }} selected. Showing {{ vm.left.shown.length }} of {{ vm.left.itemsLen }}.</span> <span class=pull-right ng-if="vm.left.pagesLen>1 || vm.isBackendPaginationApplied"><button ng-disabled="vm.left.currentPage == \'1\'" class="btn btn-xs btn-default" ng-click="vm.previousPage(\'left\')"><span class="fa fa-chevron-left"></span></button> <span>PAGE {{vm.left.currentPage}} OF {{vm.left.pagesLen}}</span> <button ng-disabled=vm.isChoicesNextDisabled() class="btn btn-xs btn-default" ng-click="vm.nextPage(\'left\')"><span class="fa fa-chevron-right"></span></button></span></p></div><div class="col-xs-6 right-control"><label>Selected</label><span class="fa fa-times clear-filter" ng-if=vm.right.filter ng-click="vm.clearFilter(\'right\')"></span> <input ng-model=vm.right.filter type=search class=form-control placeholder=Filter ng-change="vm.filterShownItems(\'right\')"><div class=buttons><button ng-click="vm.moveSelected(\'left\')" class=single type=button><i class="fa fa-angle-left"></i></button> <button ng-click="vm.moveAll(\'left\')" class=all type=button><i class="fa fa-angle-double-left"></i></button></div><div class=item-container-wrapper><ul class=item-container><span class=picker-message ng-if=!vm.right.shown.length>No items <span ng-if=vm.right.filter>found</span> <span ng-if=!vm.right.filter>selected</span></span><li ng-dblclick="vm.move(\'left\', item)" ng-class="{ active: vm.isItemSelected(\'right\', item) }" class=item ng-click="vm.toggleSelected(\'right\', item)" ng-repeat="item in vm.right.shown"><span ng-bind-html="vm.options.label ? vm.options.label(item) : item.label | highlight:vm.right.filter"></span></li></ul></div><p class=clearfix><span class=pull-left>{{ vm.right.selected.length }} selected. Showing {{ vm.right.shown.length }} of {{ vm.right.itemsLen }}.</span> <span class=pull-right ng-if="vm.right.pagesLen>1"><button ng-disabled="vm.right.currentPage == \'1\'" class="btn btn-xs btn-default" ng-click="vm.previousPage(\'right\')"><span class="fa fa-chevron-left"></span></button> <span>PAGE {{vm.right.currentPage}} OF {{vm.right.pagesLen}}</span> <button ng-disabled="vm.right.currentPage == vm.right.pagesLen" class="btn btn-xs btn-default" ng-click="vm.nextPage(\'right\')"><span class="fa fa-chevron-right"></span></button></span></p></div></div>';window.angular.module("ng").run(["$templateCache",function(e){e.put(n,i)}]),e.exports=n}])});
//# sourceMappingURL=angular-picker.min.js.map